<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="theme-color" content="#FFD700"/>
  <link rel="manifest" href="manifest.json"/>
  <title>CryptoKid Tools</title>
  <link rel="stylesheet" href="style.css"/>
  <link href="https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&display=swap" rel="stylesheet"/>
  <style>
    .market-ticker {
      background: #111; color: #FFD700; overflow: hidden; white-space: nowrap;
      padding: 10px; font-size: 0.9rem; border-bottom: 1px solid #FFD700; position: relative;
    }
    .market-ticker span {
      display: inline-block; min-width: 100%; padding-right: 40px;
      animation: scroll-ticker 20s linear infinite;
    }
    @keyframes scroll-ticker {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }
    details {
      background: #111; color: #FFD700; border: 1px solid #FFD70055;
      border-radius: 5px; margin-bottom: 15px; padding: 10px;
    }
    summary {
      cursor: pointer; font-weight: bold; font-size: 1.1rem; margin-bottom: 10px;
    }
    details[open] summary::after { content: " ▲"; }
    details summary::after { content: " ▼"; }
  </style>
</head>
<body>
  <div class="market-ticker">
    <span>BTC: $62,115 | ETH: $3,010 | PI: $0.72 | SOL: $155.12 | DOGE: $0.137</span>
  </div>
  <nav class="navbar">
    <div class="logo old-english">CryptoKid</div>
    <div class="hamburger" onclick="toggleMenu()"><span></span><span></span><span></span></div>
    <ul class="nav-links" id="navMenu">
      <li><a href="index.html">Home</a></li>
      <li><a href="articles.html">Articles</a></li>
      <li><a href="guides.html">Guides</a></li>
      <li><a href="markets.html">Markets</a></li>
      <li><a href="tools.html">Tools</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
  </nav>
  <header class="hero">
    <h1 class="hero-title">Crypto Tools & Calculators</h1>
    <p class="hero-subtext">Forecasts, simulators, alerts and more — all in one place.</p>
  </header>
  <main class="main-content">

    <details><summary>Growth Forecast Calculator</summary>
      <input id="startPrice" type="number" placeholder="Current Price (e.g. 0.50)"/>
      <input id="growthRate" type="number" placeholder="Daily Growth % (e.g. 2)"/>
      <input id="days" type="number" placeholder="Days into Future"/>
      <button onclick="calcGrowth()">Calculate</button>
      <div id="growthResult"></div>
    </details>

    <details><summary>Market Cap Estimator</summary>
      <input id="circulating" type="number" placeholder="Circulating Supply"/>
      <input id="targetCap" type="number" placeholder="Target Market Cap"/>
      <button onclick="calcCap()">Estimate</button>
      <div id="capResult"></div>
    </details>

    <details><summary>Unlock Impact Simulator</summary>
      <input id="currentPrice" type="number" placeholder="Current Price"/>
      <input id="unlockAmount" type="number" placeholder="Tokens Unlocking"/>
      <input id="sellPressure" type="number" placeholder="Sell Pressure %"/>
      <button onclick="calcUnlock()">Simulate</button>
      <div id="unlockResult"></div>
    </details>

    <details><summary>Sentiment + Trend Predictor</summary>
      <input id="sentimentScore" type="number" placeholder="Sentiment Score %"/>
      <input id="rsi" type="number" placeholder="RSI (0-100)"/>
      <button onclick="predictSentiment()">Predict</button>
      <div id="sentimentResult"></div>
    </details>

    <details><summary>Forecast Chart</summary>
      <input id="tokenChartInput" placeholder="Token ID (e.g. bitcoin)" style="width:100%;margin-bottom:8px;"/>
      <button onclick="loadForecastChart()">Load Chart</button>
      <canvas id="forecastChart" height="100" style="margin-top:10px;"></canvas>
    </details>

    <details><summary>Portfolio Tracker</summary>
      <input id="portfolioToken" placeholder="Token ID"/>
      <input id="portfolioAmount" type="number" placeholder="Amount Held"/>
      <input id="purchasePrice" type="number" placeholder="Purchase Price (USD)"/>
      <button onclick="calculatePortfolio()">Calculate</button>
      <div id="portfolioResult"></div>
    </details>

    <details><summary>Price Alert Manager</summary>
      <input id="alertToken" placeholder="Token ID"/>
      <input id="alertTarget" type="number" placeholder="Target Price (USD)"/>
      <button onclick="checkPriceAlert()">Check Alert</button>
      <div id="alertResult"></div>
    </details>

  </main>

  <footer class="footer">
    <p>© 2025 CryptoKid. Built for those who read between the blocks.</p>
  </footer>

  <script src="js/chart.min.js"></script>
  <script>
    function toggleMenu() { document.getElementById('navMenu').classList.toggle('show'); }
    function calcGrowth() {
      const p=parseFloat(document.getElementById("startPrice").value),
            r=parseFloat(document.getElementById("growthRate").value)/100,
            d=parseInt(document.getElementById("days").value);
      document.getElementById("growthResult").textContent = isNaN(p)||isNaN(r)||isNaN(d) ? "" : 
        `Projected Price: $${(p*Math.pow(1+r,d)).toFixed(4)} after ${d} days`;
    }
    function calcCap() {
      const supply=parseFloat(document.getElementById("circulating").value),
            cap=parseFloat(document.getElementById("targetCap").value),
            price=cap/supply;
      document.getElementById("capResult").textContent = isNaN(price)? "" : `Target Price: $${price.toFixed(6)}`;
    }
    function calcUnlock() {
      const price=parseFloat(document.getElementById("currentPrice").value),
            sellRate=parseFloat(document.getElementById("sellPressure").value)/100,
            impact=price*(1-(sellRate*0.5));
      document.getElementById("unlockResult").textContent = isNaN(impact)? "" : 
        `Simulated Price After Sell-Off: $${impact.toFixed(4)}`;
    }
    function predictSentiment() {
      const s=parseFloat(document.getElementById("sentimentScore").value),
            rsi=parseInt(document.getElementById("rsi").value);
      let pred="Neutral";
      if(s>70&&rsi<70) pred="Bullish";
      else if(s<40||rsi>75) pred="Bearish";
      document.getElementById("sentimentResult").textContent = `Predicted Trend: ${pred}`;
    }
    async function loadForecastChart() {
      const token=document.getElementById("tokenChartInput").value.trim().toLowerCase()||"bitcoin",
            res=await fetch(`https://api.coingecko.com/api/v3/coins/${token}/market_chart?vs_currency=usd&days=30`),
            data=await res.json(),
            labels=data.prices.map(([t])=>new Date(t).toLocaleDateString()),
            prices=data.prices.map(([_,v])=>v),
            ctx=document.getElementById("forecastChart").getContext("2d");
      if(window.forecastChartInstance) window.forecastChartInstance.destroy();
      window.forecastChartInstance=new Chart(ctx,{type:'line',data:{labels, datasets:[{label:token.toUpperCase()+" Price (USD)",data:prices,borderColor:"#FFD700",backgroundColor:"rgba(255,215,0,0.1)",borderWidth:2,pointRadius:0,fill:true}]},options:{responsive:true,scales:{x:{ticks:{color:"#ccc"}},y:{ticks:{color:"#ccc"}}},plugins:{legend:{labels:{color:"#FFD700"}}}}});
    }
    async function calculatePortfolio() {
      const token=document.getElementById("portfolioToken").value.trim().toLowerCase(),
            amt=parseFloat(document.getElementById("portfolioAmount").value),
            buy=parseFloat(document.getElementById("purchasePrice").value);
      if(!token||isNaN(amt)||isNaN(buy)){ document.getElementById("portfolioResult").innerHTML="<p style='color:red;'>Please fill out fields.</p>"; return; }
      try{
        const res=await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${token}&vs_currencies=usd`),
              data=await res.json(), current=data[token]?.usd;
        if(!current) throw"Token not found";
        const value=current*amt, initial=buy*amt, pnl=value-initial, pnlPct=((pnl/initial)*100).toFixed(2);
        document.getElementById("portfolioResult").innerHTML=`
          <p><strong>Current Price:</strong> $${current.toFixed(4)}</p>
          <p><strong>Total Value:</strong> $${value.toFixed(2)}</p>
          <p><strong>Profit/Loss:</strong> $${pnl.toFixed(2)} (${pnlPct}%)</p>`;
      } catch(e){ document.getElementById("portfolioResult").innerHTML="<p style='color:red;'>Error fetching price.</p>"; }
    }
    async function checkPriceAlert() {
      const token=document.getElementById("alertToken").value.trim().toLowerCase(),
            target=parseFloat(document.getElementById("alertTarget").value);
      if(!token||isNaN(target)){ document.getElementById("alertResult").innerHTML="<p style='color:red;'>Enter both fields.</p>"; return; }
      try{
        const res=await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${token}&vs_currencies=usd`),
              data=await res.json(), current=data[token]?.usd;
        if(!current) throw"Token not found";
        const hit=current>=target;
        document.getElementById("alertResult").innerHTML=hit?`<p style='color:lime;'><strong>ALERT:</strong> ${token.toUpperCase()} is $${current.toFixed(2)}</p>`:`<p style='color:orange;'>Current: $${current.toFixed(2)}</p>`;
      } catch(e){ document.getElementById("alertResult").innerHTML="<p style='color:red;'>Error fetching price.</p>"; }
    }
  </script>
</body>
</html>
